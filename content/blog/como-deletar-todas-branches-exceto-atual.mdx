---
title: "Como excluir todas as branches locais, exceto a atual?"
description: "Seria bom fazer uma limpeza em tantas branches/ramifica√ß√µes baixadas no seu reposit√≥rio local, certo? Vamos aprender a fazer isso."
date: 2024-12-04 14:30:00
published: true
tags: ["git", "dicas", "organiza√ß√£o"]
---

Se voc√™ executar `git branch` no seu reposit√≥rio local, poder√° ver v√°rias branches em que est√° trabalhando ou que j√° trabalhou. Depois de um tempo, voc√™ ir√° acumular muitas delas que nem usa mais, ent√£o vamos aprender a fazer uma limpeza.

## O comando "m√°gico"

Sem enrola√ß√£o, abra o Git Bash (o terminal do Git). Se sua branch principal for de nome `master` e voc√™ n√£o quiser preservar nenhuma outra, j√° pode executar o seguinte comando:

<Alert>
  <IconInfo className="h-4 w-4" />
  <AlertTitle>Aten√ß√£o</AlertTitle>
  <AlertDescription>
    Use esse comando com cuidado! Ele apaga branches locais de forma
    irrevers√≠vel. Se voc√™ tiver altera√ß√µes n√£o commitadas ou branches que n√£o
    foram "mergeadas", elas ser√£o perdidas.
  </AlertDescription>
</Alert>

```bash
$ git branch | grep -v "master" | xargs git branch -D
```

Se sua **branch principal e/ou de trabalho** tiver outro nome, altere `master` para outro nome que voc√™ utilize.

**Pronto! Isso j√° far√° uma limpeza no seu reposit√≥rio local.** Caso queira entender melhor o comando ou mais algumas dicas de uso, vamos nos aprofundar mais.

---

## Entendendo o comando

Comando completo:

```bash
$ git branch | grep -v "master" | xargs git branch -D
```

### 1. `git branch`

Esse comando lista todas as branches locais no reposit√≥rio. Por exemplo:

```bash
  feature1
  feature2
* master
```

O asterisco (\*) indica a branch atual.

### 2. `| grep -v "master"`

O `|` √© o operador pipe, que direciona a sa√≠da do comando anterior (`git branch`) para o pr√≥ximo comando (`grep`).

O comando `grep -v "master"` filtra as linhas excluindo aquelas que cont√™m a palavra "master".

Por exemplo, se a sa√≠da de `git branch` fosse:

```bash
  feature1
  feature2
* master
```

Ap√≥s passar por `grep -v "master"`, sobraria:

```bash
  feature1
  feature2
```

### 3. `| xargs git branch -D`

O comando `xargs` pega as linhas da entrada (filtradas pelo `grep`) e as transforma em argumentos para o comando que segue (`git branch -D`).

- `git branch -D <nome_da_branch>`: Apaga a branch localmente, mesmo que ela n√£o tenha sido integrada ou esteja desatualizada (√© uma dele√ß√£o for√ßada).

Por exemplo, se a sa√≠da do `grep` foi:

```bash
  feature1
  feature2
```

O `xargs` transforma isso no equivalente a executar:

```bash
git branch -D feature1
git branch -D feature2
```

---

## Fluxo geral:

1. `git branch` lista as branches locais.
2. `grep -v "master"` remove a branch `master` da lista.
3. `xargs git branch -D` apaga todas as branches restantes, exceto a `master`.

---

## Extra

Para manter a sua branch atual (vai que voc√™ j√° est√° utilizando ela), ela vai vir com um \* na frente do nome, ent√£o voc√™ pode ajustar o seguinte trecho no c√≥digo:

```bash
grep -v ^*
```

Para manter mais de uma branch, voc√™ pode usar:

```bash
grep -v "master\|minha-outra-branch"
```

E caso voc√™ utilize **PowerShell**, n√£o precisa do comando acima! Fique na branch que voc√™ quer manter e execute:

```bash
git branch -D $(git branch).Trim()
```

---

Isso √© tudo! Espero ter ajudado! üòä

<small>
  Fonte:
  https://stackoverflow.com/questions/28572293/can-i-delete-all-the-local-branches-except-the-current-one
</small>
